<div class="account-config-container">
	<div class="header-section">
		<h2><i class="fas fa-user-cog"></i> Configuración de la Cuenta</h2>
	</div>

	<!-- Sección de información de perfil -->
	<div class="account-section">
		<div class="section-title">
			<i class="fas fa-user"></i>
			Perfil
		</div>
		<div class="info-row">
			<label><i class="fas fa-id-card"></i> Nombre:</label>
			<span class="info-value">{{ user?.name || '' }}</span>
		</div>
		<div class="info-row">
			<label><i class="fas fa-envelope"></i> Email:</label>
			<span class="info-value">{{ user?.email || '' }}</span>
		</div>
		<div class="info-row account-type-row">
			<label><i class="fas fa-user-tag"></i> Tipo de cuenta:</label>
			<span class="badge-account-type" [class.host]="userTypeLabel === 'HOST'">{{ userTypeLabel }}</span>
			@if (userTypeLabel !== 'HOST') {
				<button class="btn btn-warning btn-become-host" (click)="onBecomeHost()">
					<i class="fas fa-user-plus"></i> Quiero ser host
				</button>
			}
		</div>
	</div>

	<!-- Sección de cambio de contraseña -->
	<div class="account-section">
		<div class="section-title">
			<i class="fas fa-lock"></i>
			Contraseña
		</div>
		<div class="info-row password-row">
			<label><i class="fas fa-key"></i> Contraseña:</label>
			<input type="password" value="********" readonly />
			<button class="btn btn-secondary btn-change-password" (click)="showChangePassword = !showChangePassword">
				<i class="fas fa-edit"></i> Cambiar
			</button>
		</div>
		@if (showChangePassword) {
			<form class="change-password-form" [formGroup]="passwordForm" (ngSubmit)="onChangePassword()">
				<div class="info-row">
					<label><i class="fas fa-lock"></i> Contraseña actual:</label>
					<input type="password" formControlName="currentPassword" />
					<div *ngIf="passwordForm.get('currentPassword')?.touched && passwordForm.get('currentPassword')?.invalid" class="text-danger small">
						<div *ngIf="passwordForm.get('currentPassword')?.errors?.['required']">Este campo es obligatorio.</div>
					</div>
				</div>
				<div class="info-row">
					<label><i class="fas fa-lock"></i> Nueva contraseña:</label>
					<input type="password" formControlName="newPassword" />
					<div *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.invalid" class="text-danger small">
						<div *ngIf="passwordForm.get('newPassword')?.errors?.['required']">Este campo es obligatorio.</div>
						<div *ngIf="passwordForm.get('newPassword')?.errors?.['minlength']">Debe tener al menos 8 caracteres.</div>
						<div *ngIf="passwordForm.get('newPassword')?.errors?.['maxlength']">No puede tener más de 20 caracteres.</div>
						<div *ngIf="passwordForm.get('newPassword')?.errors?.['pattern']">
							Debe contener al menos una mayúscula, un número y un símbolo (@$!%*?&._-).
						</div>
					</div>
				</div>
				<div class="info-row">
					<label><i class="fas fa-lock"></i> Confirmar contraseña:</label>
					<input type="password" formControlName="confirmPassword" />
					<div *ngIf="passwordForm.get('confirmPassword')?.touched && passwordForm.get('confirmPassword')?.invalid" class="text-danger small">
						<div *ngIf="passwordForm.get('confirmPassword')?.errors?.['required']">Este campo es obligatorio.</div>
					</div>
				</div>
				<div *ngIf="passwordForm.touched && passwordForm.errors?.['passwordsMismatch']" class="text-danger small">
					Las contraseñas ingresadas deben ser iguales.
				</div>
				<div class="button-section">
					<button class="btn btn-success me-2" type="submit">
						<i class="fas fa-save"></i> Guardar
					</button>
					<button class="btn btn-danger" type="button" (click)="showChangePassword = false">
						<i class="fas fa-times"></i> Cancelar
					</button>
				</div>
				@if (passwordError) {
					<div class="alert alert-danger">{{ passwordError }}</div>
				}
				@if (passwordSuccess) {
					<div class="alert alert-success">{{ passwordSuccess }}</div>
				}
			</form>
		}
	</div>

	<!-- Sección de documentos -->
	<div class="account-section">
		<div class="section-title">
			<i class="fas fa-file-alt"></i>
			Documentos
		</div>
		<form (ngSubmit)="onUploadDocuments()" class="upload-documents-form">
			<div class="info-row">
				<label><i class="fas fa-upload"></i> Agregar documentos (imágenes):</label>
				<input type="file" (change)="onFileSelected($event)" multiple accept="image/*" id="fileUpload" style="display:none;" />
				<label for="fileUpload" class="btn btn-select-files">
					<i class="fas fa-folder-open"></i> Seleccionar archivos
				</label>
				<span class="selected-files-count" *ngIf="selectedFiles.length">{{ selectedFiles.length }} archivo(s) seleccionado(s)</span>
			</div>
			<div class="button-section">
				<button class="btn btn-primary" type="submit" [disabled]="!selectedFiles.length">
					<i class="fas fa-cloud-upload-alt"></i> Subir
				</button>
			</div>
			@if (uploadError) {
				<div class="alert alert-danger">{{ uploadError }}</div>
			}
			@if (uploadSuccess) {
				<div class="alert alert-success">{{ uploadSuccess }}</div>
			}
		</form>
		<div class="document-list">
			@if (userDocuments.length === 0) {
				<div class="text-secondary">No hay documentos subidos.</div>
			}
			@for (doc of userDocuments; track doc; let i = $index) {
				<div class="document-item">
					<span><i class="fas fa-file-image"></i> {{ doc }}</span>
					<button class="btn btn-danger btn-delete-document" (click)="onDeleteDocument(i)">
						<i class="fas fa-trash"></i> Eliminar
					</button>
				</div>
			}
		</div>
	</div>
</div>
